\section{Related Work}
\label{sec:related}
ItsNat~\cite{santamariaitsnat} is a server-centric framework that also adopts server side DOM tree
and has a similar client server DOM synchronization mechanism.
However, the application developers need to register event handlers using Java
language, thus they cannot use the existing client side \js{} libraries.
Moreover, to horizontally scale up, ItsNat introduces a stateless mode which
constructs the whole server side DOM tree for every client side request,
which could be expensive if the DOM tree is big.
Another option is to introduce a load balancer that 
keeps session affinity when distributes requests.
In our system, scaling up is handled transparently by the framework.


% http://itsnat.sourceforge.net/index.php?_page=overview

% http://books.zkoss.org/wiki/ZK_Developer%27s_Reference/Clustering
% http://www.javaworld.com/article/2075019/jndi/j2ee-clustering--part-1.html

% TODO zkoss

% http://books.zkoss.org/wiki/Small_Talks/2007/April/How_to_Run_ZK_on_Apache_%2B_Tomcat_clustering,_Part_I
% session replication "replication costly while cluster nodes more then three (it's about math, think about fully connected graph K3~K4"
ZK~\cite{chen2007zk} is a Java-based server-centric framework that is widely adopted in enterprise web projects.
Developers define UI interface using a XML markup language ZUML or in Java code.
Then the UI definition is translated to HTML and CSS and transmitted to the client side
when the page is requested.
% TODO how zk works
ZK use session replication to scale up(ZK store UI states in session objects).
First, developers need make sure that objects referenced by UI must implement Serializable.
It also requires lengthy configuration to make the cluster nodes 
replicate session objects to each other,
you need different configuration for different types of Java Application Servers.
Besides of development effort, session replication is costly and memory consuming, 
the cost of session replication is proportional to the size of the cluster,
and memory consumption for each cluster node is proportional to the number of active
clients,
this seriously limits ZK's scalability.
% TODO every node pick an arbitrary node to replicate is also an option, wonder why they do not use this option

LIBERATED~\cite{lipman2011liberated} creates a development environment that runs server side code and 
client side code inside web browser.
The developers could test the whole stack of the web application use just the browser.
With the help of \js{} debug tools provided by web browser, the developers could also
debug and step into server side code.
Although it is much easier to test the application logic,
the developers still need to face the dichotomy of client side and server side state.
Because LIBERATED needs to run server inside the web browser,
it greatly restricts the flexibility of server side.
For example, the applications could only use the database features that are supported by
browser databases.
Moreover, LIBERATED only covers simple single-server architecture, 
it is unclear how LIBERATED can support the development of multiple layered distributed web systems.
% TODO restrictions

Meteor~\cite{meteor} is a full stack platform for building web and mobile applications.
Meteor simplifies web development by providing mechanisms to automatically synchronize model data 
between client and server,
the application code needs only to manipulate client side copy of model objects and
Meteor will synchronize the changes of model objects with server and other clients.
Like \cb{}, Meteor eliminates boilerplate code in manually writing client server communication code.
Unlike \cb{}, Meteor's synchronization is in Model data level, this approach
could reveal internal state to the client side by data synchronization messages if not programmed carefully.
Also, Meteor is less flexible with third party \js{} libraries, 
developers need to cope with 
Meteor's script loading mechanism and its modules like HTML template engine
 to make the third party \js{} is properly loaded and executed.
% template engine, external js libs

